<div id="item-<%= item.id -%>"
     class="item <%= "item-clearable" if item.completed? || item.descendants.completed.count > 0 -%>"
     data-item-id="<%= item.id -%>"
     data-item-completed="<%= item.completed? -%>"
     data-item-descendants-count="<%= item.descendants.not_cleared.count -%>"
     data-item-descendants-completed-count="<%= item.descendants.not_cleared.completed.count -%>">
  <div class="item-checkbox left clickable">
    <% if item.completed? %>
      <i class="item-checkbox-checked fa fa-fw fa-check-square-o"></i>
    <% else %>
      <i class="item-checkbox-active fa fa-fw fa-square-o"></i>
    <% end %>
  </div>

  <div class="item-controls right">
    <%= link_to edit_item_path(item), class: "no-underline" do %>
      <i class="fa fa-fw fa-pencil"></i>
    <% end %>

    <%= link_to item_path(item),
                method: :delete,
                class: "no-underline",
                data: { confirm: "Are you sure you want to delete this item?" } do %>
      <i class="fa fa-fw fa-trash"></i>
    <% end %>
  </div>

  <%= link_to items_path(item), class: "item-content" do %>
    <div class="item-name <%= "strikethrough" if item.completed? -%>">
      <%= item.name %>
    </div>

    <%= render "progress_bar",  item: item %>
  <% end %>
</div>
